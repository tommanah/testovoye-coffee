import{H as h,d as _,r as n,I as y,t as c,v as p,J as x,x as s,K as S,L as f,M as g,N as u,O as v,y as b,_ as w,z as I}from"./DLKcPPjX.js";import{u as L}from"./bNDonERs.js";const N=h("users",{state:()=>({name:"",surname:""}),getters:{fullName:o=>`${o.name} ${o.surname}`},actions:{setUserInfo(o){this.name=o.name,this.surname=o.surname},clearUserInfo(){this.name="",this.surname=""}}}),U={class:"form-field"},V={class:"form-field"},B={key:0,class:"error-message"},$={class:"button-container"},k=["disabled"],F={class:"button-text"},M=_({__name:"LoginForm",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["login"],setup(o,{emit:r}){const l=r,t=n(""),a=n("");N(),y();const d=()=>{l("login",{username:t.value,password:a.value})};return(i,e)=>(p(),c("form",{onSubmit:x(d,["prevent"])},[s("div",U,[e[2]||(e[2]=s("label",{for:"username",class:"form-label"},"Логин",-1)),f(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=m=>v(t)?t.value=m:null),class:"form-input password-input",placeholder:"Например, anonymus@anonymous.com",required:""},null,512),[[g,u(t)]])]),s("div",V,[e[3]||(e[3]=s("label",{for:"password",class:"form-label"},"Пароль",-1)),f(s("input",{id:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=m=>v(a)?a.value=m:null),class:"form-input",placeholder:"*********",required:""},null,512),[[g,u(a)]])]),o.error?(p(),c("div",B,b(o.error),1)):S("",!0),s("div",$,[s("button",{type:"submit",class:"login-button",disabled:o.loading},[s("span",F,b(o.loading?"Загрузка...":"Войти"),1)],8,k),e[4]||(e[4]=s("button",{type:"button",class:"forgot-password"},[s("span",{class:"button-text"},"Забыли пароль?")],-1))])],32))}}),q=w(M,[["__scopeId","data-v-b2d79b66"]]),C={class:"login-container"},E=_({__name:"login",setup(o){n(""),n("");const r=n(!1),l=n(""),t=L(),a=y(),d=async i=>{r.value=!0,l.value="";try{await t.login(i.username,i.password),await a.push("/account")}catch(e){l.value=e instanceof Error?e.message:"Введены неверные данные авторизации. Попробуйте ещё раз"}finally{r.value=!1}};return(i,e)=>(p(),c("div",C,[e[0]||(e[0]=s("h1",{class:""},"Система управления заказами",-1)),I(q,{loading:u(r),error:u(l),onLogin:d},null,8,["loading","error"])]))}}),A=w(E,[["__scopeId","data-v-3eac7cac"]]);export{A as default};
